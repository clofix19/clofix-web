<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Standard SEO Meta -->
  <!-- <meta name="description" content="CloFix WAF is an AI-enhanced Web Application Firewall for cloud applications, offering enterprise-grade protection, real-time monitoring, and scalable security. Features include SQLi, XSS, CSRF, SSRF, Path Traversal, Command Injection, XXE blocking, bot detection, AI-driven threat scoring, IP & Geo filtering, rate limiting, and advanced analytics."> -->
  <meta name="description"
    content="CloFix WAF: AI-powered web app firewall for cloud apps with enterprise protection, bot defense, threat scoring, IP/Geo filtering, rate limiting, and analytics.">


  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="CloFix WAF | AI-Enhanced Web Application Firewall">
  <meta property="og:description"
    content="Enterprise-grade AI-enhanced WAF for cloud applications. Real-time monitoring, advanced threat protection, and scalable security for startups, SMEs, and DevOps teams.">
  <meta property="og:url" content="https://clofix.com/features">
  <meta property="og:image" content="https://clofix.com/img/facebook_clofix.png">

  <!-- LinkedIn -->
  <meta property="og:image" content="https://clofix.com/img/linkedin_clofix.png">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="CloFix WAF | AI-Enhanced Web Application Firewall">
  <meta name="twitter:description"
    content="AI-enhanced WAF for cloud applications, providing SQLi, XSS, CSRF, SSRF, bot detection, IP & Geo filtering, AI-based threat scoring, and real-time monitoring.">
  <meta name="twitter:image" content="https://clofix.com/img/X_clofix.png">
  <meta name="twitter:site" content="@clofix19">

  <!-- WhatsApp -->
  <meta property="og:image" content="https://clofix.com/img/whatsapp_clofix.png">

  <!-- <link rel="icon" type="image/png" href="img/clofix.png" /> -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">

  <link href="https://fonts.googleapis.com/css2?family=Hind:wght@600&family=Open+Sans:wght@400;600&display=swap"
    rel="stylesheet" />
  <link href="./style.css" rel="stylesheet" />

  <title>CloFix WAF Features</title>
</head>

<body>
  <header class="header">
    <div class="container">
      <div class="header__wrapper">
        <div class="c-logo">
          <a href="index.html">
            <img src="img/logo.png" alt="Logo" class="c-logo__img" />
          </a>
          <span class="c-logo__text c-logo__text--white"></span>
        </div>
        <nav class="c-nav">
          <button class="c-nav__toggle" id="navToggle" aria-label="Toggle navigation">
            <span class="c-nav__bar"></span>
            <span class="c-nav__bar"></span>
            <span class="c-nav__bar"></span>
          </button>

          <div class="c-nav__content">
            <ul class="c-list c-list--flex">
              <li class="c-list__item">
                <a href="pricing.html" class="c-link c-link--list">Pricing</a>
              </li>
              <li class="c-list__item">
                <a href="#section-services" class="c-link c-link--list">Services</a>
              </li>
              <li class="c-list__item">
                <a href="about.html" class="c-link c-link--list">About</a>
              </li>
              <li class="c-list__item">
                <a href="features.html" class="c-link c-link--list">Features</a>
              </li>
              <li class="c-list__item">
                <a href="agents.html" class="c-link c-link--list">CloFix Agent</a>
              </li>
              <li class="c-list__item">
                <a href="contact.html" class="c-link c-link--list">Contact</a>
              </li>
              <!-- Tools dropdown -->
              <li class="c-list__item c-dropdown">
                <button class="c-link c-link--list c-dropdown__toggle" aria-expanded="false" aria-haspopup="true">
                  Tools
                  <span class="c-dropdown__chev" aria-hidden="true">â–¾</span>
                </button>
                <ul class="c-dropdown__menu" role="menu">
                  <li role="none">
                    <a role="menuitem" href="cve.html" class="c-link c-link--list">CVE Checker</a>
                  </li>
                </ul>
              </li>
            </ul>
            <a href="faq.html" class="ticket-button">
              <button class="c-button c-button--small c-button--secondary">
                FAQ
              </button>
            </a>
          </div>
        </nav>
      </div>
    </div>
  </header>

  <main class="container section">
    <section class="section">
      <div class="secure-hero-container">
        <div class="section__title-wrapper">
          <h2 class="heading heading--3">
            Secure Your Applications. Scale with Confidence
          </h2>

          <p>
            <span class="highlight">CloFix WAF</span> is a next-generation, <span class="highlight">AI-enhanced Web
              Application Firewall</span> designed specifically for cloud-based applications. It offers <span
              class="highlight">enterprise-grade protection</span>, <span class="highlight">real-time monitoring</span>,
            and <span class="highlight">affordable scalability</span> â€” perfect for startups, SMEs, and DevOps-driven
            teams.
          </p>

        </div>
        <div class="secure-hero">
          <img class="secure-hero-image" src="img/clofix-wf.png" alt="CloFix WAF" />
          <div class="secure-hero-wrapper">
          </div>
        </div>
        <div class="c-card__content">
          <p>Easy Way to Point with CloFix WAF</p>
        </div>
      </div>
      <h1 class="features-title">CloFix WAF Security â€“ Key Features</h1>

      <div class="features-flex">
        <div class="feature-card" data-id="sql-injection">
          <h3>ğŸ”’ SQL Injection Protection</h3>
          <p>Detects and blocks malicious SQL queries</p>
        </div>
        <template id="sql-injection">
          <p>This feature blocks SQL injection attempts by inspecting query patterns in real time. It detects tampered
            inputs and stops database compromise.</p>
          <ul>
            <li>Detects patterns like ' OR 1=1</li>
            <li>Protects against stacked queries</li>
            <li>Blocks UNION-based extraction</li>
          </ul>
        </template>
        <div class="feature-card">
          <h3>ğŸ›¡ï¸ Cross-Site Scripting (XSS) Protection</h3>
          <p>Prevents client-side script injection attacks</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ”‘ CSRF Protection </h3>
          <p>Validates tokens to prevent cross-origin request forgery</p>
        </div>
        <div class="feature-card">
          <h3>ğŸš« SSRF Protection </h3>
          <p>Blocks requests to internal/external services initiated by attackers</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ›¡ï¸ Path Traversal Protection</h3>
          <p>Prevents access to unauthorized directories</p>
        </div>
        <div class="feature-card">
          <h3>âš™ï¸ Command Injection Protection</h3>
          <p>Detects attempts to execute shell commands via input</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ“„ XML External Entity (XXE) Blocking</h3>
          <p>Stops XXE payloads in XML parsers</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ” Insecure Deserialization Blocking</h3>
          <p>Protects against tampering of serialized objects</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ›‘ Extension Protection</h3>
          <p>Restricts access to sensitive or executable file types</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ” Payload Signature Checking </h3>
          <p>Blocks threats via custom rule signatures</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ§  Client Behavior Analysis</h3>
          <p>Detects bots and anomalies through behavior patterns</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ•µï¸â€â™‚ï¸ Tor Exit Node Blocking</h3>
          <p>Blocks traffic from anonymous networks</p>
        </div>
        <div class="feature-card">
          <h3>ğŸŒ DNS Rebinding Protection</h3>
          <p>Detects domain hijack via rebinding techniques</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ§¹ Injection & Code Execution Protection</h3>
          <p>Blocks SQLi, LFI, RFI, XXE, and similar payloads</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ¤– Bot & Headless Browser Blocking</h3>
          <p>Prevents scraping and automation by detecting headless tools</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ§¬ AI & Behavioral Analysis</h3>
          <p>Uses ML models for payload scoring and anomaly detection</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ”„ Response Body Rewriting</h3>
          <p>Cleanses HTML, JSON from leaks or scripts dynamically</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ§  AI & Agentic Detection</h3>
          <p>Detects spoofed fingerprints, CLoFix, automation tools, etc</p>
        </div>
        <div class="feature-card">
          <h3>ğŸŒŠ Flooding Attack Protection</h3>
          <p>Identifies and blocks burst/loop request attacks</p>
        </div>
        <div class="feature-card">
          <h3>ğŸŒ Slowloris Protection</h3>
          <p>Blocks slow HTTP DoS attacks.</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ”¨ Brute Force Protection</h3>
          <p>Detects repeated login/credential attempts and blocks them</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ›¡ï¸ Rate Limiting</h3>
          <p>Controls request volume per IP or session</p>
        </div>
        <div class="feature-card">
          <h3>â±ï¸ Time-Based Verification</h3>
          <p>Ensures delay enforcement to block automated tools</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ“ Header Length Limits</h3>
          <p>Rejects headers that exceed defined byte limits</p>
        </div>
        <div class="feature-card">
          <h3>âš ï¸ Malformed Header Protection</h3>
          <p>Filters out invalid or corrupted headers</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ” Header Scan Protection</h3>
          <p>Detects and blocks crafted or probe headers</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ“Š Request Validation & Enforcement</h3>
          <p>Validates method, size, encoding, spoof checks</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ”’ Session Cookie Validation</h3>
          <p>Ensures session state and integrity</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ” Cookie Tampering Protection</h3>
          <p>Detects unauthorized modifications to cookies</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ§© Session & Cookie Management</h3>
          <p>Protects against hijacking and replay attacks</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ” Cookie Tampering Protection </h3>
          <p>Detects unauthorized modifications to cookies</p>
        </div>
        <div class="feature-card">
          <h3>ğŸª Secure Cookie Flags</h3>
          <p>Enforces HttpOnly, Secure, and SameSite cookie attributes</p>
        </div>
        <div class="feature-card">
          <h3>ğŸš· IP Reputation Check</h3>
          <p>Blocks blacklisted/suspicious IPs (e.g., blocklist.de)</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ—ºï¸ GeoIP Blocking</h3>
          <p>Country- or ASN-level access control</p>
        </div>
        <div class="feature-card">
          <h3>ğŸŒ IP, Geo & Network Filtering</h3>
          <p>Combines IP, geo, ASN, Tor, DNSRebind into one layer</p>
        </div>
        <div class="feature-card">
          <h3>âš™ï¸ Configuration Misuse Detection</h3>
          <p>Detects exposed admin panels, unsafe settings</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ›¡ï¸ OWASP Top 10 Protections</h3>
          <p>Covers all major web attack categories</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ”’ TLS/SSL Hardening</h3>
          <p>Forces strong ciphers, disables weak TLS, and enforces HTTPS</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ§  CloFix Fingerprint Detection</h3>
          <p>Identifies spoofed or abnormal clients detection</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ“ˆ ClickHouse Logging</h3>
          <p>Real-time logs with high-performance analytics storage</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ§­ Geo Analytics & Visualization</h3>
          <p>Shows traffic on heatmaps by country or ASN</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ›‘ Information Leak Detection</h3>
          <p>Scans response for secrets, tokens, CC numbers</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ§¾ PDF/HTML Reports</h3>
          <p>Generate detailed logs, incidents, and threat reports</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ”” Real-Time Alerts</h3>
          <p>webhook alerts for suspicious or blocked requests</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ§¬ Lua Scripting Support</h3>
          <p>Inject custom logic using embedded Lua scripts</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ¤– AI Plugin Integration</h3>
          <p>Connect with Python-based AI scoring APIs </p>
        </div>
        <div class="feature-card">
          <h3>ğŸ”„ Reverse Proxy & Performance</h3>
          <p>Gzip, HTTP/2, path-routing, failover handling</p>
        </div>
        <div class="feature-card">
          <h3>âš™ï¸ Proxy Optimization & Caching</h3>
          <p>CloFix CDN passthrough, static cache tuning, faster</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ›¡ï¸ Common WP Attack Blockers</h3>
          <p>Blocks xmlrpc abuse, wp-login brute force, plugin scans</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ” Sensitive Path Guarding</h3>
          <p>Hides /wp-admin, /wp-content, etc</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ§± Theme/Plugin Exploit Detection</h3>
          <p>Stops known WP vuln signatures</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ”‘ License Management </h3>
          <p>Trial, Basic, Business, Enterprise with domain/bandwidth/date expiry controls</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ“¦ Per-Domain Feature Settings</h3>
          <p>Enable/disable protection per hosted domain</p>
        </div>
        <div class="feature-card">
          <h3>ğŸ§  AI: Fingerprint Scoring</h3>
          <p>Evaluates client fingerprints to detect anomalies or spoofing.</p>
        </div>

        <div class="feature-card">
          <h3>ğŸ§  AI: Payload Detector</h3>
          <p>Classifies HTTP payloads using AI models for potential attacks.</p>
        </div>

        <div class="feature-card">
          <h3>ğŸ§  AI: Traffic Anomaly Detection</h3>
          <p>Detects irregular request patterns or usage spikes.</p>
        </div>

        <div class="feature-card">
          <h3>ğŸ§  AI: Client Reputation Scoring</h3>
          <p>Scores IP reputation using AI threat intelligence.</p>
        </div>

        <div class="feature-card">
          <h3>ğŸ§  AI: JS Behavior Scoring</h3>
          <p>Analyzes JavaScript behavior to detect bots and automation.</p>
        </div>

        <div class="feature-card">
          <h3>ğŸ§  AI: Cookie Validation Score</h3>
          <p>Validates browser cookies using AI-based scoring.</p>
        </div>

        <div class="feature-card">
          <h3>ğŸ§  AI: Device Identity Score</h3>
          <p>Analyzes device fingerprint consistency and trust.</p>
        </div>

        <div class="feature-card">
          <h3>ğŸ§  AI: Automation Tool Detection</h3>
          <p>Detects use of tools like Selenium, Puppeteer, or Playwright.</p>
        </div>

        <div class="feature-card">
          <h3>ğŸ§  AI: Cloud Service Fingerprint</h3>
          <p>Detects traffic originating from cloud data centers.</p>
        </div>

        <div class="feature-card">
          <h3>ğŸ§  AI: DNS Rebinding Score</h3>
          <p>Identifies DNS rebinding attacks via behavior analysis.</p>
        </div>

        <div class="feature-card">
          <h3>ğŸ§  AI: User Behavior Learning</h3>
          <p>Detects deviations from learned user interaction patterns.</p>
        </div>

        <div class="feature-card">
          <h3>ğŸ§  AI: Crawler Detection Score</h3>
          <p>Identifies known and unknown web crawlers.</p>
        </div>

        <div class="feature-card">
          <h3>ğŸ§  AI: API Abuse Detection</h3>
          <p>Detects abnormal API access or misuse using ML.</p>
        </div>

        <div class="feature-card">
          <h3>ğŸ§  AI: Header Injection Score</h3>
          <p>Analyzes and scores header anomalies or manipulations.</p>
        </div>

        <div class="feature-card">
          <h3>ğŸ§  AI: TLS Fingerprint Score</h3>
          <p>Detects TLS/JA3 mismatches and fingerprinting anomalies.</p>
        </div>

        <div class="feature-card">
          <h3>ğŸ§  AI: SSL MITM Detection</h3>
          <p>Detects signs of SSL stripping or man-in-the-middle attacks.</p>
        </div>

        <div class="feature-card">
          <h3>ğŸ§  AI: Open Redirect Detection</h3>
          <p>Identifies open redirect attempts in URLs.</p>
        </div>

        <div class="feature-card">
          <h3>ğŸ§  AI: Fake Bot Detection</h3>
          <p>Flags bots masquerading as legitimate clients.</p>
        </div>

        <div class="feature-card">
          <h3>ğŸ§  AI: Rate Limit AI Score</h3>
          <p>Scores request frequency using adaptive AI rate control.</p>
        </div>

        <div class="feature-card" data-id="jquery-guard">
          <h3>ğŸ”’ jQuery Guard</h3>
          <p>Blocks malicious frontend requests and scores suspicious activity using AI.</p>
        </div>
        <template id="jquery-guard">
          <p>
            jQuery Guard protects your application by intercepting malicious requests before they reach the backend. It
            prevents CVE-related vulnerabilities, eliminates information leakage, and assigns risk scores for suspicious
            payloads.
          </p>
          <ul>
            <li>Blocks malicious requests before they hit the server</li>
            <li>Prevents CVE-related exploits (CVE-2022-31147, CVE-2021-21252, CVE-2021-43306)</li>
            <li>Never echoes attacker input, eliminating information leakage</li>
            <li>Assigns risk scores for suspicious payloads</li>
            <li>Unified API response: <code>{score, block, reason, engine}</code></li>
            <li>Provides server-side hardening guidance (CSRF, CSP, sanitization)</li>
            <li>Fully logs and monitors blocked attempts</li>
            <li>Simple integration with Flask / Python APIs</li>
          </ul>
          <p><strong>Test Coverage:</strong> Clean requests, Script Injection, XSS, CSS Injection, DOM Manipulation,
            Code Execution, Obfuscation, Template Injection, Complex Multi-vector Attacks, Edge Cases</p>
        </template>

        <div class="feature-card" data-id="terminal-access">
          <h3>ğŸ–¥ï¸ Terminal Access Detection</h3>
          <p>Detects and blocks reverse shells, command injection, and multi-layer obfuscation attacks in real time.</p>
        </div>

        <template id="terminal-access">
          <p>
            Terminal Access Detection protects your application and infrastructure by identifying and preventing
            unauthorized terminal access attempts. It blocks reverse shells, PowerShell payloads, Living-off-the-Land
            (LOLBin) techniques, and obfuscated commands before they can execute.
          </p>
          <ul>
            <li>Detects and blocks reverse shells over bash, Netcat, Socat, and PowerShell</li>
            <li>Prevents multi-layer obfuscation including Base64, URL encoding, Hex, and Unicode escapes</li>
            <li>Blocks Living-off-the-Land (LOLBin) attacks using legitimate binaries (WMIC, PowerShell, RegSvr32,
              MSHTA)</li>
            <li>Assigns dynamic risk scores based on threat sophistication and behavior</li>
            <li>Provides detailed logging and forensic data for each blocked attempt</li>
            <li>Integrates with AI-based behavioral analysis for zero-day detection</li>
            <li>Offers server-side hardening guidance for secure terminal access policies</li>
            <li>Easy integration with Flask / Python APIs for automated response</li>
          </ul>
          <p><strong>Test Coverage:</strong> Basic & advanced reverse shells, PowerShell payloads, multi-layer
            obfuscation, LOLBin abuse, process injection, privilege escalation, persistence mechanisms, zero-day command
            injection, and edge cases.</p>
        </template>

      </div>
    </section>
  </main>

  <footer class="footer">

    <div class="stars"></div>
    <div class="stars2"></div>
    <div class="stars3"></div>

    <div class="container c-footer">
      <div class="c-footer__column c-footer__logo-column">
        <a href="#" class="c-footer__brand">
          <img src="img/logo.png" alt="CloFix Logo" class="c-footer__logo" />
        </a>
        <p class="c-footer__text">
          <strong>Secure. Automate. Scale</strong>
        </p>
        <ul class="social">
          <li class="social-li">
            <a href="https://www.facebook.com/share/1CjDhd7WfX/" target="_blank">
              <img src="img/facebook_clofix.png" alt="Facebook" />
            </a>
          </li>
          <li class="social-li">
            <a href="https://x.com/clofix19" target="_blank">
              <img src="img/X_clofix.png" alt="X" />
            </a>
          </li>
          <li class="social-li">
            <a href="https://www.linkedin.com/company/clofix/" target="_blank">
              <img src="img/linkedin_clofix.png" alt="LinkedIn" />
            </a>
          </li>
          <li class="social-li">
            <a href="https://wa.me/8801850603126" target="_blank">
              <img src="img/whatsapp_clofix.png" alt="WhatsApp" />
            </a>
          </li>
        </ul>

      </div>

      <div class="c-footer__column">
        <h4 class="c-footer__subtitle">Company</h4>
        <ul class="c-footer__list c-footer__list--check">
          <li><a href="about.html">About CloFix</a></li>
          <li><a href="contact.html">Contact CloFix</a></li>
          <li><a href="#">Documentation</a></li>
          <li><a href="support.html">CloFix WAF Support Overview</a></li>
        </ul>
      </div>

      <div class="c-footer__column">
        <h4 class="c-footer__subtitle">Explore</h4>
        <ul class="c-footer__list c-footer__list--check">
          <li><a href="#">Events</a></li>
          <li><a href="release.html">Release</a></li>
          <li><a href="partner.html">Become A Partner</a></li>
          <li><a href="blogs.html">Blogs</a></li>
        </ul>
      </div>

      <div class="c-footer__column">
        <h4 class="c-footer__subtitle">Legal</h4>
        <ul class="c-footer__list c-footer__list--check">
          <li><a href="terms.html">Terms and Conditions</a></li>
        </ul>
      </div>
    </div>

    <div class="container">
      <p class="footer__text">Â© 2025 Â© Clofix â€“ Copyright All Rights Reserved</p>
    </div>
  </footer>

  <div id="featureModal" class="modal">
    <div class="modal-content">
      <span class="close-button">&times;</span>
      <h3 id="modalTitle"></h3>
      <div id="modalDescription"></div>
    </div>
  </div>

</body>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WP02RFXGSE"></script>
<script>
  const navToggle = document.getElementById('navToggle');
  const navContent = document.querySelector('.c-nav__content');

  // Helpers
  const dropdowns = document.querySelectorAll('.c-dropdown');
  function closeAllDropdowns() {
    dropdowns.forEach(dd => {
      dd.classList.remove('open');
      const btn = dd.querySelector('.c-dropdown__toggle');
      if (btn) btn.setAttribute('aria-expanded', 'false');
    });
  }

  // Mobile nav toggle + body lock + aria-expanded
  if (navToggle && navContent) {
    navToggle.setAttribute('aria-expanded', 'false');

    navToggle.addEventListener('click', () => {
      const open = navContent.classList.toggle('active');
      document.body.classList.toggle('nav-open', open);
      navToggle.setAttribute('aria-expanded', open ? 'true' : 'false');
      if (!open) closeAllDropdowns();
    });

    // Close menu when any nav link clicked
    navContent.querySelectorAll('a').forEach(a => {
      a.addEventListener('click', () => {
        navContent.classList.remove('active');
        document.body.classList.remove('nav-open');
        navToggle.setAttribute('aria-expanded', 'false');
        closeAllDropdowns();
      });
    });

    // Close menu with ESC
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && navContent.classList.contains('active')) {
        navContent.classList.remove('active');
        document.body.classList.remove('nav-open');
        navToggle.setAttribute('aria-expanded', 'false');
        closeAllDropdowns();
      }
    });

    // If resized to desktop, ensure body scroll is restored and panel closed
    window.addEventListener('resize', () => {
      if (window.innerWidth > 768) {
        document.body.classList.remove('nav-open');
        navContent.classList.remove('active');
        navToggle.setAttribute('aria-expanded', 'false');
        closeAllDropdowns();
      }
    });
  }

  // Dropdown toggle (accordion on mobile, click on desktop)
  dropdowns.forEach(dd => {
    const toggle = dd.querySelector('.c-dropdown__toggle');
    if (!toggle) return;

    toggle.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();

      const willOpen = !dd.classList.contains('open');

      // Close all
      closeAllDropdowns();

      // Open current if it was closed
      if (willOpen) {
        dd.classList.add('open');
        toggle.setAttribute('aria-expanded', 'true');
      }
    });
  });

  // Desktop: close dropdowns when clicking outside (ignore when mobile panel is open)
  document.addEventListener('click', (e) => {
    const panelOpen = navContent && navContent.classList.contains('active');
    if (panelOpen) return; // mobile panel manages its own closing
    if (!e.target.closest('.c-dropdown')) closeAllDropdowns();
  });

  // Also close dropdowns explicitly when a dropdown link is clicked
  document.querySelectorAll('.c-dropdown__menu a').forEach(a => {
    a.addEventListener('click', () => {
      closeAllDropdowns();
      if (navContent) navContent.classList.remove('active');
      document.body.classList.remove('nav-open');
      if (navToggle) navToggle.setAttribute('aria-expanded', 'false');
    });
  });

  const featureCards = document.querySelectorAll('.feature-card');
  const modal = document.getElementById('featureModal');
  const modalTitle = document.getElementById('modalTitle');
  const modalDescription = document.getElementById('modalDescription');
  const closeButton = document.querySelector('.close-button');

  featureCards.forEach(card => {
    card.addEventListener('click', () => {
      const title = card.querySelector('h3').innerText;
      const id = card.getAttribute('data-id');
      const template = document.getElementById(id);

      modalTitle.innerText = title;
      modalDescription.innerHTML = template.innerHTML;
      modal.style.display = 'block';
    });
  });

  closeButton.addEventListener('click', () => {
    modal.style.display = 'none';
  });

  window.addEventListener('click', e => {
    if (e.target === modal) {
      modal.style.display = 'none';
    }
  });

  window.addEventListener("keydown", function (e) {
    if (e.key === "Escape") {
      modal.style.display = "none";
    }
  });

  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-WP02RFXGSE');

  (function () {
    const headerEl = document.querySelector('.header');
    function syncHeaderHeight() {
      if (!headerEl) return;
      document.documentElement.style.setProperty('--header-h', headerEl.offsetHeight + 'px');
    }
    window.addEventListener('load', syncHeaderHeight);
    window.addEventListener('resize', syncHeaderHeight);
    if (document.fonts && document.fonts.ready) {
      document.fonts.ready.then(syncHeaderHeight);
    }
  })();
</script>

</html>